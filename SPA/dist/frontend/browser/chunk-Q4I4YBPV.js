import{a as m,b as C,c as y,d as S,e as k,f as P,g as O,h as T,i as U}from"./chunk-25FZBDSJ.js";import{$a as p,Bb as M,Ca as _,Ia as u,Ja as t,Ka as n,Oa as h,Xa as o,_a as l,ab as c,bb as E,da as f,ma as s,qa as b,rb as w,ua as x,ya as v}from"./chunk-4S6J67UW.js";function D(g,d){g&1&&(t(0,"div",29),o(1,"Teilnehmer erfolgreich entfernt."),n())}function Z(g,d){g&1&&(t(0,"div",30),o(1,"Teilnehmer konnte nicht entfernt werden. Versuche es sp\xE4ter erneut."),n())}var A=class g{constructor(d){this.taskService=d}visible=!1;eventData=null;closed=new b;titel="";datum="";beschreibung="";startZeit="";endeZeit="";tnListe=[];tn="";addUserEventId;ngOnInit(){}ngOnChanges(d){console.log("Event data changed:",this.eventData),d.eventData&&d.eventData.currentValue&&(this.titel=this.eventData.name,this.datum=this.eventData.date,this.beschreibung=this.eventData.description,this.startZeit=this.eventData.startTime,this.endeZeit=this.eventData.endTime,this.tnListe=this.eventData.tnListe?.map(r=>r.email)||[])}addEvent(){let d=!!this.eventData?.event_id;alert("Adding event "+this.titel+" on "+this.datum+" from "+this.startZeit+" to "+this.endeZeit+" description: "+this.beschreibung);let r={token:localStorage.getItem("auth_token"),event:{name:this.titel,date:this.datum,description:this.beschreibung,startTime:this.startZeit,endTime:this.endeZeit},tnListe:this.tnListe};console.log(r),d?(r.event_id=this.eventData.event_id,this.taskService.putAddEvent(r).subscribe(e=>{console.log("Event aktualisiert:",e),this.addUserEventId=this.eventData.event_id,this.sendEmails(),this.eventData=null},e=>console.log("Fehler beim Aktualisieren."))):this.taskService.postAddEvent(r).subscribe(e=>{console.log(e),this.addUserEventId=e,this.sendEmails()},e=>console.log("Could not reach server."),()=>console.log("Add event complete.")),this.closed.emit()}addParticipant(){alert("Adding user "+this.tn+" to event "+this.titel+" on "+this.datum+" from "+this.startZeit+" to "+this.endeZeit+" description: "+this.beschreibung),this.tn.trim()&&(this.tnListe.push(this.tn.trim()),this.tn="")}closePopup(){this.closed.emit()}showSuccess=!1;showError=!1;showAddUserSuccess(){this.showSuccess=!0}showAddUserFailed(){this.showError=!0}deleteEvent(){if(!this.eventData?.event_id){this.closePopup();return}let d={token:localStorage.getItem("auth_token"),event_id:this.eventData.event_id};console.log("L\xF6schen mit Daten"),console.log(d),this.taskService.deleteEvent(d).subscribe(r=>{console.log(r)},r=>console.log("Fehler"),()=>console.log("L\xF6schen erfolgreich"))}sendEmails(){if(this.tnListe.length){let d={token:localStorage.getItem("auth_token"),event:{event_id:this.addUserEventId},tnListe:this.tnListe};console.log("Emails senden f\xFCr:"),console.log(d),this.taskService.postAddUser(d).subscribe(r=>{console.log(r)},r=>{console.log("Could not reach heroku.")},()=>console.log("Login complete."))}}static \u0275fac=function(r){return new(r||g)(x(m))};static \u0275cmp=v({type:g,selectors:[["app-Add-Event"]],inputs:{visible:"visible",eventData:"eventData"},outputs:{closed:"closed"},features:[E([m]),f],decls:66,vars:8,consts:[[1,"container"],[1,"btn-close"],["type","button","id","close",3,"click"],[1,"top-part"],[1,"titel-text-datum"],[1,"input-text"],["type","text","id","titel","name","titel","placeholder","Titel","required","",3,"ngModelChange","ngModel"],["type","date","id","datum","name","datum","required","",3,"ngModelChange","ngModel"],["id","beschreibung","name","beschreibung","placeholder","Beschreibung",3,"ngModelChange","ngModel"],[1,"zeit"],[1,"beginn-time"],["for","startZeit"],["type","time","id","startZeit","name","startZeit",3,"ngModelChange","ngModel"],[1,"end-time"],["for","endeZeit"],["type","time","id","endeZeit","name","endeZeit",3,"ngModelChange","ngModel"],["id","addUser-success"],["id","addUser-failed"],[1,"users"],["type","email","id","input-addUser","name","addUser","placeholder","Teilnehmer E-Mail",3,"ngModelChange","ngModel"],["type","button","id","addUser",3,"click"],[1,"tabelle-user"],["colspan","2"],["id","output-addUser"],["type","submit","id","removeUser-btn"],["id","removedUser-success",4,"ngIf"],["id","removedUser-failed",4,"ngIf"],["type","submit","id","verwerfen",3,"click"],["type","submit","id","speichern",3,"click"],["id","removedUser-success"],["id","removedUser-failed"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return e.closePopup()}),o(3,"\u2716"),n()(),t(4,"h1"),o(5,"Termin erstellen"),n(),t(6,"div",3)(7,"form",4)(8,"div",5)(9,"input",6),c("ngModelChange",function(i){return p(e.titel,i)||(e.titel=i),i}),n(),t(10,"input",7),c("ngModelChange",function(i){return p(e.datum,i)||(e.datum=i),i}),n()(),t(11,"textarea",8),c("ngModelChange",function(i){return p(e.beschreibung,i)||(e.beschreibung=i),i}),n()(),t(12,"form",9)(13,"div",10)(14,"label",11),o(15,"Beginn:"),n(),t(16,"input",12),c("ngModelChange",function(i){return p(e.startZeit,i)||(e.startZeit=i),i}),n()(),t(17,"div",13)(18,"label",14),o(19,"Ende:"),n(),t(20,"input",15),c("ngModelChange",function(i){return p(e.endeZeit,i)||(e.endeZeit=i),i}),n()()()(),t(21,"div",16),o(22,"E-Mail erfolgreich an Teilnehmer gesendet."),n(),t(23,"div",17),o(24,"E-Mail konnte nicht gesendet werden. Versuche es sp\xE4ter erneut."),n(),t(25,"form",18)(26,"input",19),c("ngModelChange",function(i){return p(e.tn,i)||(e.tn=i),i}),n(),t(27,"button",20),h("click",function(){return e.addParticipant()}),o(28,"Hinzuf\xFCgen"),n()(),t(29,"div",21)(30,"table")(31,"thead")(32,"tr")(33,"th",22),o(34,"Eingeladene Teilnehmer"),n()()(),t(35,"tbody")(36,"tr")(37,"td",23),o(38,"test@test.dejkhdfghghhhhhdfbnjrbedjb- das hier sieht man nicht mehr"),n(),t(39,"td")(40,"button",24),o(41,"Entfernen"),n()()(),t(42,"tr")(43,"td",23),o(44,"test@test.de"),n(),t(45,"td")(46,"button",24),o(47,"Entfernen"),n()()(),t(48,"tr")(49,"td",23),o(50,"test@test.de"),n(),t(51,"td")(52,"button",24),o(53,"Entfernen"),n()()(),t(54,"tr")(55,"td",23),o(56,"test@test.de"),n(),t(57,"td")(58,"button",24),o(59,"Entfernen"),n()()()()()(),_(60,D,2,0,"div",25)(61,Z,2,0,"div",26),t(62,"button",27),h("click",function(){return e.deleteEvent()}),o(63,"Termin verwerfen"),n(),t(64,"button",28),h("click",function(){return e.addEvent()}),o(65,"Speichern"),n()()),r&2&&(s(9),l("ngModel",e.titel),s(),l("ngModel",e.datum),s(),l("ngModel",e.beschreibung),s(5),l("ngModel",e.startZeit),s(4),l("ngModel",e.endeZeit),s(6),l("ngModel",e.tn),s(34),u("ngIf",e.showSuccess),s(),u("ngIf",e.showError))},dependencies:[U,O,C,y,S,T,P,k,M,w],styles:["body[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#152b51;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.btn-close[_ngcontent-%COMP%]{display:flex;float:right}button[_ngcontent-%COMP%]{font-size:15px}#close[_ngcontent-%COMP%]{margin-right:10px;margin-top:8px;border:1px solid;width:50px;height:50px;border:none;border-radius:50%;background-color:transparent;cursor:pointer;font-size:25px;color:#f9f5e3}#close[_ngcontent-%COMP%]:hover{background-color:#933}.container[_ngcontent-%COMP%]{background-color:#213e6e;width:840px;height:600px}h1[_ngcontent-%COMP%]{color:#f9f5e3;font-size:45px;margin-top:70px;margin-left:50px;border-bottom:1px solid #993333;width:350px}.input-text[_ngcontent-%COMP%]{margin-left:50px;margin-bottom:10px;display:flex}[_ngcontent-%COMP%]::placeholder{color:#f9f5e3}.top-part[_ngcontent-%COMP%]{height:155px;display:flex}#titel[_ngcontent-%COMP%]{font-size:16px;width:300px;height:45px;padding:0 5px;border:none;border-radius:5px;border-bottom:1px solid black;background-color:#da9ca8cc;box-shadow:0 2px 5px #152b51;color:#f9f5e3}#datum[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;cursor:pointer;font-size:16px;width:200px;height:45px;margin-left:10px;padding:0 5px;border:none;border-radius:5px;border-bottom:1px solid black;background-color:#da9ca8cc;box-shadow:0 2px 5px #152b51;color:#f9f5e3}#beschreibung[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:16px;margin-left:50px;width:520px;height:65px;padding:1px 5px;border:none;border-radius:5px;border-bottom:1px solid black;background-color:#da9ca8cc;box-shadow:0 2px 5px #152b51;color:#f9f5e3;resize:vertical;max-height:90px}.zeit[_ngcontent-%COMP%]{margin-left:25px;margin-top:5px;font-size:large}label[_ngcontent-%COMP%]{color:#f9f5e3;font-weight:500}#startZeit[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;width:100px;height:30px;padding:0 5px;margin-left:15px;border:none;border-radius:5px;cursor:pointer;background-color:#da9ca8cc;box-shadow:0 2px 5px #152b51;color:#f9f5e3;font-size:16px}#endeZeit[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;width:100px;height:30px;padding:0 5px;margin-left:31px;border:none;border-radius:5px;cursor:pointer;background-color:#da9ca8cc;box-shadow:0 2px 5px #152b51;color:#f9f5e3;font-size:16px}.beginn-time[_ngcontent-%COMP%]{margin-bottom:15px}.users[_ngcontent-%COMP%]{margin-left:50px;margin-top:27px;display:flex}#input-addUser[_ngcontent-%COMP%]{font-size:16px;width:220px;height:36px;padding:0 5px;border:none;border-radius:5px;background-color:#da9ca8cc;box-shadow:0 2px 5px #152b51;color:#f9f5e3}#addUser-btn[_ngcontent-%COMP%]{margin-left:8px;width:100px;height:36px;cursor:pointer;border:none;border-radius:5px;background-color:#933;box-shadow:0 2px 5px #152b51;color:#f9f5e3}#addUser-success[_ngcontent-%COMP%]{margin-left:50px;position:absolute;color:#933;width:328px;padding-left:5px;padding-bottom:2px;font-size:16px;font-weight:700;background-color:#fff9;display:none}#addUser-failed[_ngcontent-%COMP%]{margin-left:50px;position:absolute;color:#933;width:490px;padding-left:5px;padding-bottom:2px;font-size:16px;font-weight:700;background-color:#fff9;display:none}#verwerfen[_ngcontent-%COMP%]{margin-left:190px;margin-top:60px;width:140px;height:35px;cursor:pointer;border:none;border-radius:5px;background-color:#933;box-shadow:0 2px 5px #152b51;color:#f9f5e3}#speichern[_ngcontent-%COMP%]{margin-left:10px;width:90px;height:35px;cursor:pointer;border:none;border-radius:5px;background-color:#933;box-shadow:0 2px 5px #152b51;color:#f9f5e3}.tabelle-user[_ngcontent-%COMP%]{float:left;margin-left:50px;margin-top:10px;overflow-y:scroll;overflow-x:hidden;width:335px;height:auto;max-height:150px;border:1px solid white;border-radius:5px;color:#f9f5e3}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px}th[_ngcontent-%COMP%]{background-color:#933;border-bottom:1px solid #F9F5E3;font-weight:500}td[_ngcontent-%COMP%]{background-color:#da9ca899;border-bottom:1px solid #F9F5E3;border-right:1px solid #F9F5E3}#output-addUser[_ngcontent-%COMP%]{width:215px;max-width:215px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#removeUser-btn[_ngcontent-%COMP%]{background-color:transparent;color:#933;border:1px solid;cursor:pointer;font-weight:600;padding-left:5px}#removedUser-success[_ngcontent-%COMP%]{margin-left:50px;position:absolute;color:#933;width:247px;padding-left:5px;padding-bottom:2px;font-size:16px;font-weight:700;background-color:#fff9;margin-top:170px;opacity:1}#removedUser-failed[_ngcontent-%COMP%]{margin-left:50px;position:absolute;color:#933;width:320px;padding-left:5px;padding-bottom:2px;font-size:16px;font-weight:700;background-color:#fff9;margin-top:170px;opacity:1}"]})};export{A as a};
